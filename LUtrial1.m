A=[24 2 5 34; 16 32 44 21; 10 17 33 2; 15 16 23 12];
[L,U,P]=lu(A);
%disp(A)
I=eye(4);
%disp(I)
Sm21 = A(2,1)/A(1,1);
A(2,:)=A(2,:)-Sm21*A(1,:);
Sm31=A(3,1)/A(1,1);
A(3,:)=A(3,:)-Sm31*A(1,:);
Sm41=A(4,1)/A(1,1);
A(4,:)=A(4,:)-A(4,1)/A(1,1)*A(1,:);
I(2,1)=Sm21;
I(3,1)=Sm31;
I(4,1)=Sm41;
%.................................................
Sm32=A(3,2)/A(2,2);
A(3,:)= A(3,:)-Sm32*A(2,:);
Sm42=A(4,2)/A(2,2);
A(4,:)=A(4,:)-Sm42*A(2,:);
I(3,2)=Sm32;
I(4,2)=Sm42;
%.......................................
Sm43=A(4,3)/A(3,3);
A(4,:)=A(4,:)-Sm43*A(3,:);
I(4,3)=Sm43;
%................................................
disp(I)
disp(A)

